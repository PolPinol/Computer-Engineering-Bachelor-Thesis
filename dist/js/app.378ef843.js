(function(){"use strict";var e={4260:function(e,t,s){var a=s(9242),r=s(3396);const n={class:""};function i(e,t,s,a,i,o){const l=(0,r.up)("HomeButtons"),d=(0,r.up)("SignUpForm"),u=(0,r.up)("LogInForm"),c=(0,r.up)("GamePage");return(0,r.wg)(),(0,r.iD)("div",n,[0===e.mode?((0,r.wg)(),(0,r.j4)(l,{key:0})):(0,r.kq)("",!0),1===e.mode?((0,r.wg)(),(0,r.j4)(d,{key:1})):(0,r.kq)("",!0),2===e.mode?((0,r.wg)(),(0,r.j4)(u,{key:2})):(0,r.kq)("",!0),3===e.mode?((0,r.wg)(),(0,r.j4)(c,{key:3})):(0,r.kq)("",!0)])}var o=s(3766),l=s(6265),d=s.n(l);const u=(0,o.Q_)("gamemaster",{state:()=>({resources:[],troops:[],buildings:[],pyramid:{},adventures:[],lands:{}}),getters:{},actions:{async getGameMasterInfo(){const e=await d().get("./gameMaster.json");this.resources=e.data.resources,this.troops=e.data.troops,this.buildings=e.data.buildings,this.pyramid=e.data.pyramid,this.adventures=e.data.adventures,this.lands=e.data.lands}}}),c=s(6265)["default"],h=(0,o.Q_)("player",{state:()=>({username:void 0,authKey:void 0,lands:void 0,ranking:void 0,position:void 0}),getters:{},actions:{async getPosition(){const e={method:"GET",url:"https://age-of-ra.herokuapp.com/api/ranking",headers:{Authorization:"Bearer "+this.authKey}};return await c(e).then((e=>{this.position=e.data.top}))},async getRanking(){const e={method:"GET",url:"https://age-of-ra.herokuapp.com/api/ranking/top",headers:{Authorization:"Bearer "+this.authKey}};return await c(e).then((e=>{this.ranking=e.data.ranking}))},async refreshLands(){const e={method:"GET",url:"https://age-of-ra.herokuapp.com/api/lands",headers:{Authorization:"Bearer "+this.authKey}};return await c(e).then((e=>{this.lands=e.data.lands}))},async createPlayer(e,t){const s={method:"POST",url:"https://age-of-ra.herokuapp.com/api/players",data:{username:e,password:t}};return c(s).then((e=>null)).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async authenticatePlayer(e,t){this.username=e;const s={method:"POST",url:"https://age-of-ra.herokuapp.com/api/players/login",data:{username:e,password:t}};return await c(s).then((e=>{this.authKey=e.data.auth_key;const t="authKey",s=this.authKey,a=4,r=new Date;r.setTime(r.getTime()+60*a*60*1e3);const n="; expires="+r.toUTCString();return document.cookie=t+"="+(s||"")+n+"; path=/",null})).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async getLandsId(){const e={method:"GET",url:"https://age-of-ra.herokuapp.com/api/lands",headers:{Authorization:"Bearer "+this.authKey}};return await c(e).then((e=>(this.lands=e.data.lands,this.lands[0]))).catch((()=>null))},setAuthKey(e){this.authKey=e}}});var p=s.p+"img/logo.b72375ba.png";const g=e=>((0,r.dD)("data-v-1f5b03dd"),e=e(),(0,r.Cn)(),e),m={class:"home"},f=g((()=>(0,r._)("img",{src:p,alt:""},null,-1))),y={class:"d-flex container"};function w(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",m,[f,(0,r._)("div",y,[(0,r._)("button",{class:"button",onClick:t[0]||(t[0]=(...e)=>i.showSignUp&&i.showSignUp(...e))},"Sign Up"),(0,r._)("button",{class:"button",onClick:t[1]||(t[1]=(...e)=>i.showLogIn&&i.showLogIn(...e))},"Log In")])])}var v={name:"HomeButtons",props:{msg:String},methods:{showSignUp(){this.$parent.showSignUp()},showLogIn(){this.$parent.showLogIn()}}},k=s(89);const b=(0,k.Z)(v,[["render",w],["__scopeId","data-v-1f5b03dd"]]);var _=b,D=s(7139);const I=e=>((0,r.dD)("data-v-64ddbc0a"),e=e(),(0,r.Cn)(),e),q={class:"container home"},R={class:"config4"},$=I((()=>(0,r._)("i",{class:"material-icons"},"reply",-1))),P=[$],S=I((()=>(0,r._)("h1",null,"Register to the game!",-1))),C={class:"form-group"},z=I((()=>(0,r._)("br",null,null,-1))),L={class:"form-group"},T=I((()=>(0,r._)("br",null,null,-1))),U={class:"form-group"},x=I((()=>(0,r._)("br",null,null,-1))),F=I((()=>(0,r._)("input",{type:"submit",class:"button",value:"Sign Up"},null,-1))),M={key:0},K={key:1},G={key:2};function B(e,t,s,n,i,o){return(0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",R,[(0,r._)("button",{class:"button2 buttonLogout",onClick:t[0]||(t[0]=e=>o.back())},P)]),S,(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>o.signup&&o.signup(...e)),["prevent"]))},[(0,r._)("div",C,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.username=t),type:"text",class:"insert",id:"floatingInput",placeholder:"Username",required:""},null,512),[[a.nr,e.username]])]),z,(0,r._)("div",L,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),type:"password",class:"insert",id:"floatingPassword",placeholder:"Password",required:""},null,512),[[a.nr,e.password]])]),T,(0,r._)("div",U,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.confirmPassword=t),type:"password",class:"insert",id:"floatingPassword2",placeholder:"Confirm Password",required:""},null,512),[[a.nr,e.confirmPassword]])]),x,F],32),(0,r._)("p",null,(0,D.zw)(e.message),1),e.username.length<8?((0,r.wg)(),(0,r.iD)("p",M,"Username has less than 8 characters.")):(0,r.kq)("",!0),e.password.length<8?((0,r.wg)(),(0,r.iD)("p",K,"Password has less than 8 characters.")):(0,r.kq)("",!0),e.password!==e.confirmPassword?((0,r.wg)(),(0,r.iD)("p",G,"Password and Confirmation Password doesn't match.")):(0,r.kq)("",!0)])}var A={name:"SignUpForm",props:{msg:String},data:function(){return{player:h(),username:"",password:"",confirmPassword:"",message:""}},methods:{async signup(){if(this.username.length>=8&&this.username.length>=8&&this.password===this.confirmPassword){const e=await this.player.createPlayer(this.username,this.password);null===e?this.$parent.showHomePage():this.message=e}},back(){this.$parent.showHomePage()}}};const H=(0,k.Z)(A,[["render",B],["__scopeId","data-v-64ddbc0a"]]);var E=H;const O=e=>((0,r.dD)("data-v-38606b20"),e=e(),(0,r.Cn)(),e),j={class:"container home"},Y={class:"config4"},Q=O((()=>(0,r._)("i",{class:"material-icons"},"reply",-1))),N=[Q],Z=O((()=>(0,r._)("h1",null,"Enter to the game!",-1))),V={class:"form-group"},W=O((()=>(0,r._)("br",null,null,-1))),J={class:"form-group"},X=O((()=>(0,r._)("br",null,null,-1))),ee=O((()=>(0,r._)("input",{type:"submit",class:"button",value:"Log In"},null,-1))),te={key:0},se={key:1};function ae(e,t,s,n,i,o){return(0,r.wg)(),(0,r.iD)("div",j,[(0,r._)("div",Y,[(0,r._)("button",{class:"button2 buttonLogout",onClick:t[0]||(t[0]=e=>o.back())},N)]),Z,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>o.login&&o.login(...e)),["prevent"]))},[(0,r._)("div",V,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.username=t),type:"text",class:"insert",id:"floatingInput",placeholder:"Username",required:""},null,512),[[a.nr,e.username]])]),W,(0,r._)("div",J,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),type:"password",class:"insert",id:"floatingPassword",placeholder:"Password",required:""},null,512),[[a.nr,e.password]])]),X,ee],32),(0,r._)("p",null,(0,D.zw)(e.message),1),e.username.length<8?((0,r.wg)(),(0,r.iD)("p",te,"Username has less than 8 characters.")):(0,r.kq)("",!0),e.password.length<8?((0,r.wg)(),(0,r.iD)("p",se,"Password has less than 8 characters.")):(0,r.kq)("",!0)])}var re={name:"LogInForm",props:{msg:String},data:function(){return{player:h(),username:"",password:"",message:""}},methods:{async login(){if(this.username.length>=8&&this.username.length>=8){const e=await this.player.authenticatePlayer(this.username,this.password);null===e?this.$parent.accessGame():this.message=e}},back(){this.$parent.showHomePage()}}};const ne=(0,k.Z)(re,[["render",ae],["__scopeId","data-v-38606b20"]]);var ie=ne;const oe=e=>((0,r.dD)("data-v-0e576887"),e=e(),(0,r.Cn)(),e),le={class:"height"},de=oe((()=>(0,r._)("div",{class:"logo"},[(0,r._)("img",{src:p,alt:""})],-1))),ue={class:"config1"},ce=oe((()=>(0,r._)("i",{class:"material-icons"},"home",-1))),he=[ce],pe={class:"config2"},ge=oe((()=>(0,r._)("i",{class:"material-icons"},"assessment",-1))),me=[ge],fe={class:"config3"},ye=oe((()=>(0,r._)("i",{class:"material-icons"},"history",-1))),we=[ye],ve={class:"config4"},ke=oe((()=>(0,r._)("i",{class:"material-icons"},"exit_to_app",-1))),be=[ke],_e={class:"flexx container"},De={key:3,class:"containerBig"},Ie={class:"flexi"},qe={class:"d-flex justify-content-around align-self-center container"},Re={ref:"pop",class:"overlay3"},$e={class:"popup2"},Pe=oe((()=>(0,r._)("h2",null,"Close session",-1))),Se=oe((()=>(0,r._)("p",null,"Are you sure to logout?",-1)));function Ce(e,t,s,a,n,i){const o=(0,r.up)("RankingPage"),l=(0,r.up)("TimeLinePage"),d=(0,r.up)("LandsNavigation"),u=(0,r.up)("ResourcesQuantity"),c=(0,r.up)("TroopsQuantity"),h=(0,r.up)("QueueAdventures"),p=(0,r.up)("QueueConstructions"),g=(0,r.up)("ResourcesFields"),m=(0,r.up)("BuildingsFields"),f=(0,r.up)("AdventureSelector");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",le,[de,(0,r._)("div",ue,[(0,r._)("button",{class:"button buttonHome",onClick:t[0]||(t[0]=e=>i.showHomeGame())},he)]),(0,r._)("div",pe,[(0,r._)("button",{class:"button buttonHome",onClick:t[1]||(t[1]=e=>i.showRanking())},me)]),(0,r._)("div",fe,[(0,r._)("button",{class:"button buttonTimeline",onClick:t[2]||(t[2]=e=>i.showTimeline())},we)]),(0,r._)("div",ve,[(0,r._)("button",{class:"button buttonLogout",onClick:t[3]||(t[3]=e=>i.popup())},be)]),3===e.visualGameMode?((0,r.wg)(),(0,r.j4)(o,{key:0})):(0,r.kq)("",!0),2===e.visualGameMode?((0,r.wg)(),(0,r.j4)(l,{key:1,timeline:this.land.$state.landData.timeline},null,8,["timeline"])):(0,r.kq)("",!0),-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(d,{key:2,name:this.land.$state.landData.name,"lands-id":this.player.$state.lands},null,8,["name","lands-id"])):(0,r.kq)("",!0),(0,r._)("div",_e,[-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(u,{key:0,resources:this.land.$state.landData.resources,productions:this.land.$state.landData.productions},null,8,["resources","productions"])):(0,r.kq)("",!0),-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(c,{key:1,"troops-quantity":this.land.$state.landData.troops},null,8,["troops-quantity"])):(0,r.kq)("",!0)]),-1!==e.visualGameMode?((0,r.wg)(),(0,r.iD)("div",De,[(0,r._)("div",Ie,[-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(h,{key:0,"events-time":this.land.$state.landData.eventsTime},null,8,["events-time"])):(0,r.kq)("",!0),-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(p,{key:1,"events-time":this.land.$state.landData.eventsTime},null,8,["events-time"])):(0,r.kq)("",!0)]),4!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(g,{key:0,"resources-fields":this.land.$state.landData.resourcesFields,"land-type":this.land.$state.landData.landType},null,8,["resources-fields","land-type"])):(0,r.kq)("",!0),4===e.visualGameMode?((0,r.wg)(),(0,r.j4)(m,{key:1,"buildings-fields":this.land.$state.landData.buildingsFields,"pyramid-level":this.land.$state.landData.pyramidLevel},null,8,["buildings-fields","pyramid-level"])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",qe,[-1!==e.visualGameMode?((0,r.wg)(),(0,r.j4)(f,{key:0})):(0,r.kq)("",!0)])]),(0,r._)("div",Re,[(0,r._)("div",{class:"overlay4",onClick:t[4]||(t[4]=e=>i.unpopup())}),(0,r._)("div",$e,[Pe,Se,(0,r._)("a",{onClick:t[5]||(t[5]=e=>i.unpopup()),class:"close"},"×"),(0,r._)("button",{class:"but",onClick:t[6]||(t[6]=e=>i.logout())},"Logout")])],512)],64)}const ze=(0,o.Q_)("land",{state:()=>({landData:void 0}),getters:{},actions:{async getLandInfo(e,t){const s={method:"GET",url:"https://age-of-ra.herokuapp.com/api/lands/"+e,headers:{Authorization:"Bearer "+t}};return await d()(s).then((e=>{this.landData=e.data})).catch((()=>null))},async updateResource(e,t){const s={method:"POST",url:"https://age-of-ra.herokuapp.com/api/resource",data:{landId:this.landData._id,nField:e},headers:{Authorization:"Bearer "+t}};return await d()(s).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async refreshLand(e){const t={method:"GET",url:"https://age-of-ra.herokuapp.com/api/lands/"+this.landData._id,headers:{Authorization:"Bearer "+e}};return await d()(t).then((e=>{this.landData=e.data})).catch((()=>null))},async build(e,t,s){const a={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands/building",data:{landId:this.landData._id,buildingId:e,nField:t},headers:{Authorization:"Bearer "+s}};return await d()(a).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async upgradeBuilding(e,t,s){const a={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands/building",data:{landId:this.landData._id,buildingId:t,nField:e},headers:{Authorization:"Bearer "+s}};return await d()(a).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async upgradePyramid(e){const t={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands/pyramid",data:{landId:this.landData._id},headers:{Authorization:"Bearer "+e}};return await d()(t).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async recruitTroops(e,t,s){const a={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands/troops",data:{landId:this.landData._id,troopId:t,quantity:s},headers:{Authorization:"Bearer "+e}};return await d()(a).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async adventure(e,t){const s={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands/adventure",data:{landId:this.landData._id,troops:this.landData.troops,difficulty:t},headers:{Authorization:"Bearer "+e}};return await d()(s).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))},async createLand(e){const t={method:"POST",url:"https://age-of-ra.herokuapp.com/api/lands",data:{landId:this.landData._id},headers:{Authorization:"Bearer "+e}};return await d()(t).then((e=>1===e.data.ok?null:"Network error")).catch((e=>{try{return e.response.data.error}catch(t){return"Error at network."}}))}}}),Le=e=>((0,r.dD)("data-v-74cf4934"),e=e(),(0,r.Cn)(),e),Te={key:0,class:"home"},Ue=Le((()=>(0,r._)("h3",null,"Constructions",-1))),xe=Le((()=>(0,r._)("p",null,"No constructions yet.",-1))),Fe=[Ue,xe],Me={key:1,class:"home"},Ke=Le((()=>(0,r._)("h3",null,"Constructions",-1))),Ge={class:"scrollQueueC"},Be={class:"tbl"},Ae={class:"fw-normal"},He={class:"fw-normal left"},Ee=Le((()=>(0,r._)("hr",null,null,-1)));function Oe(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)(r.HY,null,[0===e.events.length?((0,r.wg)(),(0,r.iD)("div",Te,Fe)):(0,r.kq)("",!0),0!==e.events.length?((0,r.wg)(),(0,r.iD)("div",Me,[Ke,(0,r._)("div",Ge,[(0,r._)("div",Be,[(0,r._)("table",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.events,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.time},[(0,r._)("th",Ae,"["+(0,D.zw)(e.time)+"]",1),(0,r._)("th",He,(0,D.zw)(e.queue),1),Ee])))),128))])])])])):(0,r.kq)("",!0)],64)}var je={name:"QueueConstructions",props:{eventsTime:[]},data:function(){return{message:"",events:[]}},methods:{updateEvents(e){this.events=[];for(const t of e)if("LT"!==t.type&&"adventure"!==t.type){const e={};e.type=t.type,e.queue=t.queue;const s=new Date(t.time)-new Date;e.date=new Date(s),e.seconds=Math.round(Math.abs(new Date(t.time)-new Date)/1e3),e.seconds>=86400?e.time="+24:00:00":e.time=new Date(s).toISOString().substr(11,8),this.events.push(e)}for(const t of this.events)t.seconds<86400&&window.setInterval((()=>{const e=t.date.getTime();t.date=new Date(e-1e3),t.time=new Date(t.date).toISOString().substr(11,8),"23:59:59"===t.time&&this.$parent.refresh()}),1e3)}},beforeMount(){this.updateEvents(this.eventsTime)},watch:{eventsTime:function(e){this.updateEvents(e)}}};const Ye=(0,k.Z)(je,[["render",Oe],["__scopeId","data-v-74cf4934"]]);var Qe=Ye;const Ne={class:"flexa"},Ze=["src"],Ve={class:"fw-bold"},We={key:0};function Je(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",Ne,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.resources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"columni",key:e.resourceId},[(0,r._)("img",{src:this.defaultSrc[t],alt:""},null,8,Ze),(0,r._)("div",null,[(0,r._)("p",Ve,(0,D.zw)(e.quantity.toLocaleString("es")),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.productions,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.type},[e.type===t.type?((0,r.wg)(),(0,r.iD)("span",We,"(+"+(0,D.zw)(t.production.toLocaleString("es"))+" / s)",1)):(0,r.kq)("",!0)])))),128))])])))),128))])}var Xe={name:"ResourcesQuantity",props:{resources:void 0,productions:void 0},data:function(){return{gamemaster:u(),resourceInfo:void 0,defaultSrc:[]}},methods:{clear(){const e=window.setInterval((function(){}),Number.MAX_SAFE_INTEGER);for(let t=1;t<e;t++)window.clearInterval(t)}},created(){this.clear();const e=this.gamemaster.$state.resources;let t=0;for(const s of this.resources)for(const a of e)s.type===a.resourceId&&(this.defaultSrc[t]=a.src,t++);for(const s of this.resources)for(const e of this.productions)s.type===e.type&&window.setInterval((()=>{s.quantity=parseInt(s.quantity)+parseInt(e.production)}),1e3)},watch:{resources:function(e){this.clear();for(const t of e)for(const e of this.productions)t.type===e.type&&window.setInterval((()=>{t.quantity=parseInt(t.quantity)+parseInt(e.production)}),1e3)}}};const et=(0,k.Z)(Xe,[["render",Je],["__scopeId","data-v-a5256d36"]]);var tt=et;const st=e=>((0,r.dD)("data-v-2eb56e84"),e=e(),(0,r.Cn)(),e),at={class:"d-flex navi align-content-center container"},rt={class:"firstrow"},nt=["onClick"],it=st((()=>(0,r._)("i",{class:"material-icons"},"add_box",-1))),ot=[it],lt={ref:"pop",class:"overlay"},dt={class:"popup"},ut=st((()=>(0,r._)("h2",null,"Create Land",-1))),ct={class:"content"},ht={key:0,class:"flexd"},pt=["src"],gt={class:"error_mess"};function mt(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",at,[(0,r._)("div",rt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.lands,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:e.landId,class:"d-inline-block"},[(0,r._)("h3",{ref_for:!0,ref:"elements"},[(0,r._)("a",{onClick:s=>i.change(e,t)},(0,D.zw)(e.name),9,nt)],512)])))),128)),(0,r._)("a",{onClick:t[0]||(t[0]=e=>i.popup())},ot)]),(0,r._)("div",lt,[(0,r._)("div",{class:"overlay2",onClick:t[1]||(t[1]=e=>i.unpopup())}),(0,r._)("div",dt,[ut,(0,r._)("a",{onClick:t[2]||(t[2]=e=>i.unpopup()),class:"close"},"×"),(0,r._)("div",ct,[0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("div",ht,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.upgradeResources,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCostNew",src:e.src,alt:""},null,8,pt)])))),128))])):(0,r.kq)("",!0)]),(0,r._)("button",{class:"button",onClick:t[3]||(t[3]=e=>i.create())},"Create"),(0,r._)("p",gt,(0,D.zw)(e.message),1)])],512)])}var ft={name:"LandsNavigation",props:{name:void 0,landsId:[]},components:{},data:function(){return{lands:[],gamemaster:u(),land:ze(),player:h(),message:"",index:-1,upgradeResources:[]}},methods:{popup(){this.$refs.pop.style.visibility="visible",this.$refs.pop.style.opacity="1"},unpopup(){this.$refs.pop.style.visibility="hidden",this.$refs.pop.style.opacity="0"},back(){this.$parent.showHomeGame()},change(e,t){for(const s of this.$refs.elements)s.style.color="black",s.style.fontWeight="500";this.index=t,this.$refs.elements[this.index].style.color="#EBAF37",this.$refs.elements[this.index].style.fontWeight="700",this.$parent.changeLand(e.landId)},async create(){const e=await this.land.createLand(this.player.$state.authKey);this.message="",null===e?(this.message="Created correctly.",this.$parent.refreshAll(),this.unpopup()):this.message=e},start(e){this.lands=[];const t=this.land.$state.landData._id;let s=0;for(const a of e){const e={};e.landId=a,t===a&&(this.index=s),e.name="Land_"+a.slice(a.length-5,a.length),this.lands.push(e),s++}for(const a of this.gamemaster.$state.lands.resources){const e={};e.type=a.type,e.quantity=a.quantity;for(const t of this.gamemaster.$state.resources)if(t.resourceId===a.type){e.src=t.src;break}this.upgradeResources.push(e)}}},beforeMount(){this.start(this.landsId)},mounted(){for(const e of this.$refs.elements)e.style.color="black",e.style.fontWeight="500";this.$refs.elements[this.index].style.color="#EBAF37",this.$refs.elements[this.index].style.fontWeight="700"},watch:{landsId:function(e){this.start(e)}}};const yt=(0,k.Z)(ft,[["render",mt],["__scopeId","data-v-2eb56e84"]]);var wt=yt;const vt={class:"width"},kt={class:"d-flex home"},bt={class:"distribution-map"},_t=["src"],Dt=["onClick"],It={class:"d-flex align-content-center row descr home3"},qt={key:0},Rt={key:1,class:"flexd"},$t=["src"],Pt={key:2,class:"flexdd"},St={key:0},Ct={key:1},zt={key:3},Lt={key:5},Tt={class:"error_mess"};function Ut(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",vt,[(0,r._)("div",kt,[(0,r._)("div",bt,[(0,r._)("img",{src:e.imageSrc,alt:""},null,8,_t),(0,r._)("button",{class:"rombo",onClick:t[0]||(t[0]=e=>i.nextMap())}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.resourcesFields,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.nField},[(0,r._)("button",{ref_for:!0,ref:"items",onClick:e=>i.mark(t),class:"map-point labels hover",style:(0,D.j5)("top:"+e.coordsTop[t.nField-1]+"%;left:"+e.coordsLeft[t.nField-1]+"%")},(0,D.zw)(t.level),13,Dt)])))),128))]),(0,r._)("div",It,[0!==e.upgradeResources.length||""!==e.message?((0,r.wg)(),(0,r.iD)("h3",qt,"Upgrade "+(0,D.zw)(e.name),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("div",Rt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.upgradeResources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCost",src:this.resources[t].src,alt:""},null,8,$t)])))),128))])):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("div",Pt,[0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",St,"Level: "+(0,D.zw)(e.level-1)+" → "+(0,D.zw)(e.level),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",Ct,"Production: "+(0,D.zw)(e.prodBefore)+" → "+(0,D.zw)(e.prodAfter),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",zt,"🕑 "+(0,D.zw)(e.time),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("button",{key:4,class:"button",onClick:t[1]||(t[1]=e=>i.levelUp())},"Level Up")):(0,r.kq)("",!0),0===e.upgradeResources.length&&""===e.message?((0,r.wg)(),(0,r.iD)("p",Lt,"Select a field to level up.")):(0,r.kq)("",!0),(0,r._)("p",Tt,(0,D.zw)(e.message),1)])])])}var xt={name:"ResourcesFields",props:{resourcesFields:[],landType:void 0},data:function(){return{message:"",coordsTop:[18,18,18,32,32,32,32,45,45,45,45,58,58,58,58,72,72,72],coordsLeft:[31,50,68,22,41,59,78,12,31,69,88,22,40,60,78,31,50,69],resources:[],holeSelected:-1,gamemaster:u(),upgrade:void 0,level:0,upgradeResources:[],name:"",prodBefore:0,prodAfter:0,time:0,land:ze(),player:h(),imageSrc:""}},methods:{mark(e){for(let s in this.$refs.items)this.$refs.items[s].style["background-color"]="rgb(255, 255, 255, 0.3)";this.$refs.items[e.nField-1].style["background-color"]="rgb(255, 255, 255, 0.7)";let t=!1;for(const s of this.land.$state.landData.eventsTime)"upgrade_resource"===s.type&&s.nField===e.nField&&(t=!0);if(t)this.upgradeResources=[],this.message="Upgrade in queue ...";else{this.resources=this.gamemaster.$state.resources,this.upgrade={},this.preUpgrade={};for(const t of this.resources)if(t.resourceId===e.type){if(t.upgrades.length===e.level)return this.upgradeResources=[],void(this.message="Max level");this.name=t.name,this.upgrade=t.upgrades[e.level],this.preUpgrade=t.upgrades[e.level-1]}this.message="",this.level=this.upgrade.level,this.upgradeResources=this.upgrade.resources,this.prodBefore=this.preUpgrade.production,this.prodAfter=this.upgrade.production,this.holeSelected=e.nField,this.time=new Date(1e3*this.upgrade.time).toISOString().substr(11,8)}},nextMap(){this.$parent.showBuildings()},async levelUp(){const e=await this.land.updateResource(this.holeSelected,this.player.$state.authKey);this.upgradeResources=[],null===e?(this.message="Upgrade in queue ...",this.$parent.refresh()):this.message=e}},beforeMount(){for(const e of this.gamemaster.$state.lands.type)this.landType===e.typeId&&(this.imageSrc=e.src)},watch:{landType:function(e){for(const t of this.gamemaster.$state.lands.type)e===t.typeId&&(this.imageSrc=t.src)}}};const Ft=(0,k.Z)(xt,[["render",Ut],["__scopeId","data-v-18101bac"]]);var Mt=Ft,Kt=s.p+"img/map3.05f409d5.png";const Gt=e=>((0,r.dD)("data-v-2f7934b8"),e=e(),(0,r.Cn)(),e),Bt={class:"width"},At={class:"d-flex home"},Ht={class:"config5"},Et=Gt((()=>(0,r._)("i",{class:"material-icons"},"arrow_back",-1))),Ot=[Et],jt={class:"distribution-map"},Yt=Gt((()=>(0,r._)("img",{src:Kt,alt:""},null,-1))),Qt=["src"],Nt=["onClick"],Zt=["src"],Vt={class:"d-flex align-content-center row descr home3"},Wt={key:0},Jt={key:1,class:"fw-bold"},Xt=["src"],es={class:"flexd"},ts=["src"],ss={key:3},as={key:4},rs={key:5},ns={key:7,class:"fw-bold"},is=["src"],os={key:9,class:"description"},ls={class:"flexd"},ds=["src"],us={key:10},cs={key:11},hs={class:"scroll",id:"style-1"},ps={class:"fw-bold h4"},gs=["src"],ms={class:"description"},fs={class:"flexd"},ys=["src"],ws=["onClick"],vs=Gt((()=>(0,r._)("hr",null,null,-1))),ks={key:13,class:"fw-bold"},bs=["src"],_s={class:"flexd"},Ds=["src"],Is={class:"inputflex"},qs={class:"error_mess"};function Rs(e,t,s,n,i,o){return(0,r.wg)(),(0,r.iD)("div",Bt,[(0,r._)("div",At,[(0,r._)("div",Ht,[(0,r._)("button",{class:"button2",onClick:t[0]||(t[0]=e=>this.$parent.showHomeGame())},Ot)]),(0,r._)("div",jt,[Yt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.buildings,((s,a)=>((0,r.wg)(),(0,r.iD)("li",{key:s.nField},[(0,r._)("img",{class:"building",src:s.src,style:(0,D.j5)("top:"+e.coordsTop[s.nField-1]+"%;left:"+e.coordsLeft[s.nField-1]+"%;z-index: "+e.zindexs[s.nField-1])},null,12,Qt),(0,r._)("button",{ref_for:!0,ref:"items",onClick:e=>o.mark(s),class:"rombo",style:(0,D.j5)("top:"+e.coordsTop[s.nField-1]+"%;left:"+e.coordsLeft[s.nField-1]+"%;")},null,12,Nt),14===a?((0,r.wg)(),(0,r.iD)("img",{key:0,class:"pyramid",src:e.pyramidInfo.src},null,8,Zt)):(0,r.kq)("",!0),14===a?((0,r.wg)(),(0,r.iD)("button",{key:1,ref_for:!0,ref:"items-2",onClick:t[1]||(t[1]=e=>o.pyramidMark()),class:"rombo-pyramid"},null,512)):(0,r.kq)("",!0)])))),128))]),(0,r._)("div",Vt,[0===e.buildInfo.length&&0===e.upgradeResources.length&&0===e.upgradePyramidResources.length&&0===e.actionResources.length?((0,r.wg)(),(0,r.iD)("p",Wt,"Select a hole to build or level up.")):(0,r.kq)("",!0),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("h3",Jt,"Upgrade Pyramid")):(0,r.kq)("",!0),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("img",{key:2,class:"pyradDescr",src:e.pyramidUpgrade.src},null,8,Xt)):(0,r.kq)("",!0),(0,r._)("div",es,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.upgradePyramidResources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCost",src:this.resources[t].src,alt:""},null,8,ts)])))),128))]),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("p",ss,"Level: "+(0,D.zw)(e.pyramidUpgrade.level-1)+" → "+(0,D.zw)(e.pyramidUpgrade.level),1)):(0,r.kq)("",!0),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("p",as,"Bonus Production: "+(0,D.zw)(parseInt(100*(parseFloat(e.pyramidUpgrade.prodBefore)-1)))+" % → "+(0,D.zw)(parseInt(100*(parseFloat(e.pyramidUpgrade.prodAfter)-1)))+" %",1)):(0,r.kq)("",!0),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("p",rs,"🕑 "+(0,D.zw)(e.pyramidUpgrade.time),1)):(0,r.kq)("",!0),0!==e.upgradePyramidResources.length?((0,r.wg)(),(0,r.iD)("button",{key:6,class:"button",onClick:t[2]||(t[2]=e=>o.levelUpPyramid())},"Level Up")):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("h3",ns,"Upgrade "+(0,D.zw)(e.upgradeInfo.name),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("img",{key:8,class:"buildingDescr",src:e.upgradeInfo.src},null,8,is)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",os,(0,D.zw)(e.upgradeInfo.description),1)):(0,r.kq)("",!0),(0,r._)("div",ls,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.upgradeResources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCost",src:this.resources[t].src,alt:""},null,8,ds)])))),128))]),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",us,"Level: "+(0,D.zw)(e.upgradeInfo.level-1)+" → "+(0,D.zw)(e.upgradeInfo.level),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("p",cs,"🕑 "+(0,D.zw)(e.upgradeInfo.time),1)):(0,r.kq)("",!0),0!==e.upgradeResources.length?((0,r.wg)(),(0,r.iD)("button",{key:12,class:"button",onClick:t[3]||(t[3]=e=>o.levelUp())},"Level Up")):(0,r.kq)("",!0),(0,r._)("div",hs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.buildInfo,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"lidata",key:e.buildingId},[(0,r._)("h3",ps,(0,D.zw)(e.name),1),(0,r._)("img",{class:"buildingDescr",src:e.src},null,8,gs),(0,r._)("p",ms,(0,D.zw)(e.description),1),(0,r._)("div",fs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.resources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCost",src:this.resources[t].src,alt:""},null,8,ys)])))),128))]),(0,r._)("p",null,"🕑 "+(0,D.zw)(e.time),1),(0,r._)("button",{class:"button",onClick:t=>o.build(e.buildingId)},"Build",8,ws),vs])))),128))]),0!==e.actionResources.length?((0,r.wg)(),(0,r.iD)("p",ks,(0,D.zw)(e.action.name),1)):(0,r.kq)("",!0),0!==e.actionResources.length?((0,r.wg)(),(0,r.iD)("img",{key:14,class:"troop",src:e.action.src},null,8,bs)):(0,r.kq)("",!0),(0,r._)("div",_s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.actionResources,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"flexc",key:e.type},[(0,r._)("p",null,(0,D.zw)(e.quantity.toLocaleString("es")),1),(0,r._)("img",{class:"imgCost",src:this.resources[t].src,alt:""},null,8,Ds)])))),128))]),(0,r._)("div",Is,[0!==e.actionResources.length?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:0,type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.quantity=t)},null,512)),[[a.nr,e.quantity]]):(0,r.kq)("",!0),0!==e.actionResources.length?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"button",onClick:t[5]||(t[5]=e=>o.recruit())},"Recruit")):(0,r.kq)("",!0)]),(0,r._)("p",qs,(0,D.zw)(e.message),1)])])])}var $s={name:"BuildingsFields",props:{buildingsFields:void 0,pyramidLevel:void 0},data:function(){return{message:"",coordsTop:[-3,-4,-5,9,8,7,6,21,20,18,17,33,32,29,28,44,43,41,40,55,54,53,52,66,65,64],coordsLeft:[30,47,64,21,38,55,72,12,29,63,80,3,20,71,88,11,28,62,79,19,36,53,70,27,44,61],zindexs:[1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7],buildings:[],holeSelected:-1,pyramidInfo:{src:""},upgradeInfo:{},buildInfo:[],land:ze(),player:h(),gamemaster:u(),resources:[],upgradeResources:[],buildingId:"",pyramidUpgrade:[],upgradePyramidResources:[],actionResources:[],action:{},quantity:0}},methods:{async levelUp(){const e=await this.land.upgradeBuilding(this.holeSelected,this.buildingId,this.player.$state.authKey);this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],null===e?(this.message="Upgrade in queue ...",this.$parent.refresh()):this.message=e},async build(e){const t=await this.land.build(e,this.holeSelected,this.player.$state.authKey);this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],null===t?(this.message="Build in queue ...",this.$parent.refresh()):this.message=t},async levelUpPyramid(){const e=await this.land.upgradePyramid(this.player.$state.authKey);this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],null===e?(this.message="Upgrade in queue ...",this.$parent.refresh()):this.message=e},pyramidMark(){this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[];let e=!1;for(const t of this.land.$state.landData.eventsTime)"upgrade_pyramid"===t.type&&(e=!0);if(e)this.message="Upgrade in queue ...";else{const e=this.land.$state.landData.pyramidLevel;if(e>=this.gamemaster.$state.pyramid.upgrades.length)this.message="Max level";else{const t=this.gamemaster.$state.pyramid.upgrades[e],s=this.gamemaster.$state.pyramid.upgrades[e-1];this.pyramidUpgrade.src=t.src,this.message="",this.pyramidUpgrade.level=t.level,this.upgradePyramidResources=t.resources,this.pyramidUpgrade.prodBefore=s.bonusProd,this.pyramidUpgrade.prodAfter=t.bonusProd,this.resources=this.gamemaster.$state.resources,this.pyramidUpgrade.time=new Date(1e3*t.time).toISOString().substr(11,8)}}},mark(e){this.holeSelected=e.nField,this.buildingId=e.type;let t=!1;for(const s of this.land.$state.landData.eventsTime)("build"===s.type&&s.nField===e.nField||"upgrade_build"===s.type&&s.nField===e.nField)&&(t=!0);if(t)this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],this.message="Build or Upgrade in queue ...";else if(this.message="",0===e.level){this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],this.resources=this.gamemaster.$state.resources;for(const e of this.gamemaster.$state.buildings){const t={};t.buildingId=e.buildingId,t.name=e.name,t.description=e.description,t.src=e.src,t.resources=e.upgrades[0].resources,t.time=new Date(1e3*e.upgrades[0].time).toISOString().substr(11,8),this.buildInfo.push(t)}}else{this.upgradeInfo={},this.buildInfo=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],this.resources=this.gamemaster.$state.resources,this.buildingData=this.gamemaster.$state.buildings;let t={};for(const s of this.buildingData)if(s.buildingId===e.type){if(s.upgrades.length===e.level){if(this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],"NOT_IMPLEMENTED"===s.action.type)this.message="Max level";else if("TROOP"===s.action.type)for(const e of this.gamemaster.$state.troops)e.troopId===s.action.troopId&&(this.action.name="Recruit "+e.name,this.action.src=e.src,this.actionResources=e.resources);else this.message="Max level";return}this.upgradeInfo.name=s.name,t=s.upgrades[e.level],this.upgradeInfo.description=s.description,this.upgradeInfo.src=s.src}this.message="",this.upgradeInfo.level=t.level,this.upgradeResources=t.resources,this.holeSelected=e.nField,this.upgradeInfo.time=new Date(1e3*t.time).toISOString().substr(11,8)}},updateBuildings(e,t){this.pyramidInfo.level=t,this.pyramidInfo.src=this.gamemaster.$state.pyramid.upgrades[this.pyramidInfo.level-1].src;for(let s=1;s<27;s++){let t=!1;for(const a of e)if(a.nField===s){const e={};e.nField=a.nField,e.type=a.type,e.level=a.level,e.src="../assets/buildings/empty.png";for(const t of this.gamemaster.$state.buildings)if(t.buildingId===e.type){e.src=t.src;break}t=!0,this.buildings.push(e);break}if(!t){const e={};e.nField=s,e.type="",e.level=0,e.src="../assets/buildings/empty.png",this.buildings.push(e)}}},async recruit(){let e="";for(const s of this.gamemaster.$state.buildings)s.buildingId===this.buildingId&&(e=s.action.troopId);const t=await this.land.recruitTroops(this.player.$state.authKey,e,this.quantity);this.buildingData=[],this.upgradeInfo=[],this.buildInfo=[],this.upgradeResources=[],this.upgradePyramidResources=[],this.action={},this.actionResources=[],null===t?this.$parent.refresh():this.message=t}},beforeMount(){this.updateBuildings(this.buildingsFields,this.pyramidLevel)},watch:{buildingsFields:function(e){this.updateBuildings(e,this.pyramidLevel)},pyramidLevel:function(e){this.updateBuildings(this.buildingsFields,e)}}};const Ps=(0,k.Z)($s,[["render",Rs],["__scopeId","data-v-2f7934b8"]]);var Ss=Ps;const Cs={class:"flexb"},zs=["src"],Ls={key:0,class:"fw-bold"};function Ts(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",Cs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.troops,((t,s)=>((0,r.wg)(),(0,r.iD)("div",{key:t.troopId},[(0,r._)("img",{src:t.src,class:"troop"},null,8,zs),0!==e.quantity.length?((0,r.wg)(),(0,r.iD)("span",Ls,(0,D.zw)(e.quantity[s].quantity),1)):(0,r.kq)("",!0)])))),128))])}var Us={name:"TroopsQuantity",props:{troopsQuantity:void 0},data:function(){return{gamemaster:u(),quantity:[],troops:[]}},methods:{update(e){this.troops=[],this.quantity=[],this.troops=this.gamemaster.$state.troops;for(const t of this.troops){const s={};s.troopId=t.troopId,s.name=t.name,s.src=t.src,s.life=t.life,s.attackDamage=t.attackDamage,s.mobility=t.mobility;let a=0;for(const r of e)if(t.troopId===r.troopId){s.quantity=r.quantity,a++;break}0===a&&(s.quantity=0),this.quantity.push(s)}}},created(){this.update(this.troopsQuantity)},watch:{troopsQuantity:function(e){this.update(e)}}};const xs=(0,k.Z)(Us,[["render",Ts],["__scopeId","data-v-bd061cc8"]]);var Fs=xs;const Ms=e=>((0,r.dD)("data-v-87fd9460"),e=e(),(0,r.Cn)(),e),Ks={key:0,class:"home"},Gs=Ms((()=>(0,r._)("h3",null,"Adventures",-1))),Bs=Ms((()=>(0,r._)("p",null,"No adventures yet.",-1))),As=[Gs,Bs],Hs={key:1,class:"home"},Es=Ms((()=>(0,r._)("h3",null,"Adventures",-1))),Os={class:"tbl"},js={class:"fw-normal"},Ys={class:"fw-normal left"},Qs=Ms((()=>(0,r._)("hr",null,null,-1)));function Ns(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)(r.HY,null,[0===e.events.length?((0,r.wg)(),(0,r.iD)("div",Ks,As)):(0,r.kq)("",!0),0!==e.events.length?((0,r.wg)(),(0,r.iD)("div",Hs,[Es,(0,r._)("div",Os,[(0,r._)("table",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.events,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.time},[(0,r._)("th",js,"["+(0,D.zw)(e.time)+"]",1),(0,r._)("th",Ys,(0,D.zw)(e.queue),1),Qs])))),128))])])])):(0,r.kq)("",!0)],64)}var Zs={name:"QueueAdventures",props:{eventsTime:[]},data:function(){return{message:"",events:[]}},methods:{updateEvents(e){this.events=[];for(const t of e)if("adventure"===t.type){const e={};e.type=t.type,e.queue=t.queue;const s=new Date(t.time)-new Date;e.date=new Date(s),e.seconds=Math.round(Math.abs(new Date(t.time)-new Date)/1e3),e.seconds>=86400?e.time="+24:00:00":e.time=new Date(s).toISOString().substr(11,8),this.events.push(e)}for(const t of this.events)t.seconds<86400&&window.setInterval((()=>{const e=t.date.getTime();t.date=new Date(e-1e3),t.time=new Date(t.date).toISOString().substr(11,8),"23:59:59"===t.time&&this.$parent.refresh()}),1e3)}},beforeMount(){this.updateEvents(this.eventsTime)},watch:{eventsTime:function(e){this.updateEvents(e)}}};const Vs=(0,k.Z)(Zs,[["render",Ns],["__scopeId","data-v-87fd9460"]]);var Ws=Vs;const Js={class:"home"},Xs={class:"home2"},ea={class:"fw-bold"},ta=["onClick"],sa={key:0,class:"error"};function aa(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",Js,[(0,r._)("div",Xs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.adventures,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"adv",key:e.name},[(0,r._)("p",ea,(0,D.zw)(e.name)+" ("+(0,D.zw)(e.difficulty)+")",1),(0,r._)("p",null,"Time: "+(0,D.zw)(new Date(1e3*e.time).toISOString().substr(11,8)),1),(0,r._)("button",{class:"button",onClick:e=>i.click(t)},"Go",8,ta)])))),128))]),""!==this.message?((0,r.wg)(),(0,r.iD)("p",sa,(0,D.zw)(e.message),1)):(0,r.kq)("",!0)])}var ra={name:"AdventureSelector",props:{},data:function(){return{gamemaster:u(),land:ze(),player:h(),adventures:[],message:""}},methods:{async click(e){const t=await this.land.adventure(this.player.$state.authKey,e+1);this.message="",null===t?this.$parent.refresh():this.message=t}},created(){this.adventures=this.gamemaster.$state.adventures}};const na=(0,k.Z)(ra,[["render",aa],["__scopeId","data-v-493f3016"]]);var ia=na;const oa=e=>((0,r.dD)("data-v-1ba55f1f"),e=e(),(0,r.Cn)(),e),la={class:"overlay"},da={class:"home"},ua=oa((()=>(0,r._)("h3",null,"Ranking Top 10",-1))),ca={class:"tbl content-table"},ha=oa((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"fw-bold"},"Rank"),(0,r._)("th",{class:"fw-bold"},"Username"),(0,r._)("th",null,"Resources")])],-1))),pa={class:"fw-normal"},ga={class:"fw-normal"},ma={class:"fw-normal"},fa={class:"fw-bold"};function ya(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",la,[(0,r._)("div",{class:"overlay2",onClick:t[0]||(t[0]=e=>i.back())}),(0,r._)("div",da,[(0,r._)("a",{onClick:t[1]||(t[1]=e=>i.back()),class:"close"},"×"),ua,(0,r._)("div",ca,[(0,r._)("table",null,[ha,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.ranking,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{key:e.playerId},[(0,r._)("td",pa,(0,D.zw)(t+1),1),(0,r._)("td",ga,(0,D.zw)(e._id),1),(0,r._)("td",ma,(0,D.zw)(e.val),1)])))),128))])])]),(0,r._)("p",fa,"Your current position is "+(0,D.zw)(e.position),1)])])}var wa={name:"RankingPage",props:{},data:function(){return{ranking:[],player:h(),position:0}},methods:{back(){this.$parent.showHomeGame()}},beforeMount(){this.position=this.player.$state.position,this.ranking=this.player.$state.ranking}};const va=(0,k.Z)(wa,[["render",ya],["__scopeId","data-v-1ba55f1f"]]);var ka=va;const ba=e=>((0,r.dD)("data-v-c8de8bd6"),e=e(),(0,r.Cn)(),e),_a={class:"overlay"},Da={class:"home"},Ia=ba((()=>(0,r._)("h3",null,"TIMELINE",-1))),qa={key:0},Ra={class:"scroll"},$a={class:"tbl"},Pa={class:"fw-normal"},Sa={class:"fw-normal left"},Ca=ba((()=>(0,r._)("hr",null,null,-1)));function za(e,t,s,a,n,i){return(0,r.wg)(),(0,r.iD)("div",_a,[(0,r._)("div",{class:"overlay2",onClick:t[0]||(t[0]=e=>i.back())}),(0,r._)("div",Da,[(0,r._)("a",{onClick:t[1]||(t[1]=e=>i.back()),class:"close"},"×"),Ia,0===e.logs.length?((0,r.wg)(),(0,r.iD)("p",qa,"There are no logs yet.")):(0,r.kq)("",!0),(0,r._)("div",Ra,[(0,r._)("div",$a,[(0,r._)("table",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.logs,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.time},[(0,r._)("th",Pa,"["+(0,D.zw)(e.time)+"]",1),(0,r._)("th",Sa,(0,D.zw)(e.log),1),Ca])))),128))])])])])])}var La={name:"TimeLinePage",props:{timeline:void 0},data:function(){return{logs:[]}},methods:{back(){this.$parent.showHomeGame()}},beforeMount(){for(const e of this.timeline)this.logs.push(e);this.logs.sort((function(e,t){return new Date(t.time)-new Date(e.time)}));for(const e of this.logs)e.time=new Date(e.time).toLocaleString("es",{timeZone:"Europe/Paris"})}};const Ta=(0,k.Z)(La,[["render",za],["__scopeId","data-v-c8de8bd6"]]);var Ua=Ta,xa={name:"GamePage",components:{AdventureSelector:ia,ResourcesQuantity:tt,QueueConstructions:Qe,LandsNavigation:wt,ResourcesFields:Mt,BuildingsFields:Ss,TroopsQuantity:Fs,QueueAdventures:Ws,RankingPage:ka,TimeLinePage:Ua},data:function(){return{message:"",gamemaster:u(),player:h(),land:ze(),visualGameMode:-1,loaded:!1,render:0}},methods:{popup(){this.$refs.pop.style.visibility="visible",this.$refs.pop.style.opacity="1"},unpopup(){this.$refs.pop.style.visibility="hidden",this.$refs.pop.style.opacity="0"},showHomeGame(){this.refresh(),this.visualGameMode=0},showBuildings(){this.visualGameMode=4},showTimeline(){this.visualGameMode=2},async showRanking(){await this.player.getPosition(),await this.player.getRanking(),this.visualGameMode=3},logout(){document.cookie="authKey=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",this.$parent.showHomePage()},refresh(){this.land.refreshLand(this.player.$state.authKey)},refreshAll(){this.land.refreshLand(this.player.$state.authKey),this.player.refreshLands()},async changeLand(e){await this.land.getLandInfo(e,this.player.$state.authKey),this.visualGameMode=0}},async beforeMount(){const e=await this.player.getLandsId();await this.land.getLandInfo(e,this.player.$state.authKey),this.visualGameMode=0}};const Fa=(0,k.Z)(xa,[["render",Ce],["__scopeId","data-v-0e576887"]]);var Ma=Fa,Ka={name:"App",components:{LogInForm:ie,SignUpForm:E,HomeButtons:_,GamePage:Ma},data:function(){return{gamemaster:u(),mode:0,auth_key:"",landIdSelected:void 0,resources:Array,serverSelected:void 0,player:h()}},methods:{showHomePage(){this.mode=0},showSignUp(){this.mode=1},showLogIn(){this.mode=2},accessGame(){this.mode=3}},async beforeMount(){await this.gamemaster.getGameMasterInfo();const e=document.cookie.match(new RegExp("(^| )authKey=([^;]+)"));e&&(this.player.setAuthKey(e[2]),this.accessGame())}};const Ga=(0,k.Z)(Ka,[["render",i]]);var Ba=Ga;s(7024);const Aa=(0,o.WB)(),Ha=(0,a.ri)(Ba);Ha.use(Aa),Ha.mount("#app")}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,r,n){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],n=e[u][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(o=!1,n<i&&(i=n));if(o){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,r,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,i=a[0],o=a[1],l=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(l)var u=l(s)}for(t&&t(a);d<i.length;d++)n=i[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4260)}));a=s.O(a)})();
//# sourceMappingURL=app.378ef843.js.map